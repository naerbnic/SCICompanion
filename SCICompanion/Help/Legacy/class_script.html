<html>
<head>
<title>Class: EventHandler</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" border="0" cellspacing="0" cellpadding="4">
  <tr bgcolor="#a0a0a0"> 
    <td bgcolor="#a0a0a0"><font size="4" face="Tahoma" color="#FFFFFF"><b>Class: 
      Script </b>(of <a href="class_obj.html">Obj</a>)</font></td>
  </tr>
  <tr> 
    <td> 
      <p><font face="Tahoma" size="2">The script class is a very important part 
        of the game. It is used in every room to perform animation and handle 
        events. </font></p>
      <p><font face="Tahoma" size="2"><b><font size="3">Properties</font></b></font></p>
      <ul>
        <li><font size="2" face="Tahoma">client</font></li>
        <li><font size="2" face="Tahoma">state</font></li>
        <li><font size="2" face="Tahoma">start</font></li>
        <li><font size="2" face="Tahoma">timer</font></li>
        <li><font size="2" face="Tahoma">cycles</font></li>
        <li><font size="2" face="Tahoma">seconds</font></li>
        <li><font size="2" face="Tahoma">lastSeconds</font></li>
        <li><font size="2" face="Tahoma">register</font></li>
        <li><font size="2" face="Tahoma">script</font></li>
        <li><font size="2" face="Tahoma">caller</font></li>
        <li><font size="2" face="Tahoma">next</font></li>
      </ul>
      <p><font face="Tahoma" size="2"><b><font size="3">Methods</font></b></font></p>
      <ul>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>init</b>(heapPtr 
                theClient<i>[, heapPtr theCaller, number theRegister]</i>)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Sets the client property to theClient. 
                  If the other parameters are specified, it sets the caller property 
                  to theCaller, and the register property to theRegister. Finally, 
                  it calls the changeState method with the start property as it's 
                  parameter. </font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>doit</b>()</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">If the script property is not 
                  NULL, it calls the doit method of it. Next, if cycles property 
                  is not zero, it decrements it. If after decrementing, it is 
                  equal to zero, it calls the cue() method. </font></p>
                <p><font face="Tahoma" size="2">If the cycles property was zero 
                  to begin with, and the seconds property is not equal to zero, 
                  it compares the actual seconds to the lastSeconds property. 
                  If they are not equal, it sets lastSeconds to the current seconds 
                  (from GetTime(gtTIME_OF_DAY)) and decrements the seconds property. 
                  If the seconds property is equal to zero, it calss the cue() 
                  method. </font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>dispose</b>()</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Disposes of the script object 
                  and all of it's elements.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>changeState</b>(number 
                newState)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Sets the state property to the 
                  newState.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>cue</b>(<i>[sendParams]</i>)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Calls the changeState() method 
                  with (state + 1) as it's parameter. Then, if specified, sends 
                  the sendParams to the object.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">bool <b>handleEvent</b>(heapPtr 
                pEvent)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">If the script property is not 
                  null, it calls the script's handleEvent() method with pEvent 
                  has it's parameter. It then returns whether of not the pEvent 
                  object has been claimed.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li>
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>setScript</b>(heapPtr 
                scriptObj<i>[. sendParams]</i>)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">If the script property is not 
                  NULL, it disposes of the object pointed to by it. It then calls 
                  scriptObj's init() method, and if specified, send the rest of 
                  the parameters to scriptObj.</font></p>
                </td>
            </tr>
          </table>
        </li>
      </ul>
    </td>
  </tr>
</table>
</body>
</html>
