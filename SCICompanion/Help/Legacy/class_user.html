<html>
<head>
<title>Class: User</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" border="0" cellspacing="0" cellpadding="4">
  <tr bgcolor="#a0a0a0"> 
    <td bgcolor="#a0a0a0"><font size="4" face="Tahoma" color="#FFFFFF"><b>Class: 
      User </b>(of <a href="class_obj.html">Obj</a>)</font></td>
  </tr>
  <tr> 
    <td> 
      <p><font face="Tahoma" size="2">The User class is one of the main game classes. 
        It handles the user input, menubar, and other event handlers.</font></p>
      <p><font face="Tahoma" size="2"><b><font size="3">Properties</font></b></font></p>
      <ul>
        <li><font face="Tahoma" size="2">alterEgo</font></li>
        <li><font face="Tahoma" size="2">canInput</font></li>
        <li><font face="Tahoma" size="2">controls</font></li>
        <li><font face="Tahoma" size="2">echo</font></li>
        <li><font face="Tahoma" size="2">prevDir</font></li>
        <li><font face="Tahoma" size="2">prompt</font></li>
        <li><font face="Tahoma" size="2">inputLineAddr</font></li>
        <li><font face="Tahoma" size="2">x</font></li>
        <li><font face="Tahoma" size="2">y</font></li>
        <li><font face="Tahoma" size="2">blocks</font></li>
        <li><font face="Tahoma" size="2">mapKeyToDir</font></li>
        <li><font face="Tahoma" size="2">curEvent</font></li>
      </ul>
      <p><font face="Tahoma" size="2"><b><font size="3">Methods</font></b></font></p>
      <ul>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>init</b>(<i>[string 
                pInputStr, number maxLen]</i>)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Sets up the User class. If specified, 
                  it sets the inputLineAddr property to pInputStr, otherwise, 
                  the local array is used. If specified, it sets the maxInputLen 
                  property to maxLen, otherwise, it's set to 45. Finally, it sets 
                  up the curEvent property to a local Event instance.</font></p>
                <p><font face="Tahoma" size="2">An interesting note is that the 
                  default is 45, but the default inputLineStr is only 41 characters. 
                  This is a bug in the original class system, fixed in my version.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>doit</b>()</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">If gSetRegions is equal to zero, 
                  it clears it's event object, then retrieves a full event (evALL_EVENTS), 
                  and calls it's handleEvent() method.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">bool <b>canControl</b>(<i>[bool 
                fCONTROLS]</i>)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">This is used to find out whether 
                  or not the object can be controlled, as well as to set whether 
                  of not.</font></p>
                <p><font face="Tahoma" size="2">If specified, and TRUE, the controls 
                  property is set to fCONTROLS and prevDir is set to CENTER. it 
                  returns the controls property.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">number <b>getInput</b>(heapPtr 
                pEvent)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Gets input from the user. This 
                  is used as the dialog which receives the commands such as &quot;open 
                  door&quot;.</font></p>
                <p><font face="Tahoma" size="2">It returns the length of the input 
                  string. </font></p>
              </td>
            </tr>
          </table>
        </li>
        <li> 
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">number <b>said</b>(heapPtr 
                pEvent)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">Checks the event's type to see 
                  if it's an evSAID. If it is, and the event's not claimed, the 
                  game class' pragmaFail() method is called.</font></p>
              </td>
            </tr>
          </table>
        </li>
        <li>
          <table width="100%" border="0" cellspacing="1" cellpadding="2">
            <tr> 
              <td bgcolor="#DDDDDD"><font face="Tahoma" size="3">void <b>handleEvent</b>(heapPtr 
                pEvent)</font></td>
            </tr>
            <tr> 
              <td bgcolor="#F8F8F8"> 
                <p><font face="Tahoma" size="2">The User event handler.</font></p>
                <p><font face="Tahoma" size="2">It maps the event keys to directions, 
                  handles the menubar, calls the Game class' event handler, handles 
                  alterEgo's event, and if canInput, handles the input/said.</font></p>
              </td>
            </tr>
          </table>
        </li>
      </ul>
      </td>
  </tr>
</table>
</body>
</html>
